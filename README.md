# GitHub Pages HTML Hosting Plugin for Dify

ğŸš€ ä¸€ä¸ªå¼ºå¤§çš„Difyæ’ä»¶ï¼Œèƒ½å¤Ÿå°†HTMLå†…å®¹è‡ªåŠ¨æ‰˜ç®¡åˆ°æ‚¨çš„GitHub Pagesä»“åº“å¹¶æä¾›å…¬å¼€è®¿é—®é“¾æ¥ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ“ **HTMLå†…å®¹æ‰˜ç®¡** - æ¥æ”¶HTMLå†…å®¹å¹¶è‡ªåŠ¨æ‰˜ç®¡åˆ°æ‚¨çš„GitHub Pagesä»“åº“
- ğŸŒ **GitHub Pagesé›†æˆ** - è‡ªåŠ¨ä½¿ç”¨æ‚¨çš„ `{username}.github.io` ä»“åº“
- ğŸ”— **å”¯ä¸€é“¾æ¥ç”Ÿæˆ** - ä½¿ç”¨å”¯ä¸€IDç”Ÿæˆæ ¼å¼ä¸º `https://{username}.github.io/{unique_id}.html` çš„è®¿é—®é“¾æ¥
- ğŸ†” **å”¯ä¸€æ ‡è¯†ç¬¦** - æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰å”¯ä¸€çš„IDï¼Œé¿å…å†²çª
- ğŸ›¡ï¸ **å®‰å…¨éªŒè¯** - å®Œæ•´çš„GitHub tokenéªŒè¯æœºåˆ¶
- âš¡ **å¿«é€Ÿéƒ¨ç½²** - è‡ªåŠ¨ç›‘æ§éƒ¨ç½²çŠ¶æ€
- ğŸ¯ **ç”¨æˆ·å‹å¥½** - è¯¦ç»†çš„è¿›åº¦åé¦ˆå’Œé”™è¯¯æç¤º

## ğŸ“¦ å®‰è£…è¦æ±‚

- Python 3.9+
- Dify Plugin Framework
- GitHubä¸ªäººè®¿é—®ä»¤ç‰Œ
- GitHubè´¦æˆ·ï¼ˆç”¨äºåˆ›å»º `{username}.github.io` ä»“åº“ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è·å–GitHubè®¿é—®ä»¤ç‰Œ

è®¿é—® [GitHub Settings > Personal access tokens](https://github.com/settings/tokens) åˆ›å»ºæ–°ä»¤ç‰Œï¼Œéœ€è¦ä»¥ä¸‹æƒé™ï¼š
- `repo` - å®Œæ•´ä»“åº“æƒé™

### 2. é…ç½®æ’ä»¶

åœ¨Difyä¸­å®‰è£…æ’ä»¶å¹¶é…ç½®GitHubè®¿é—®ä»¤ç‰Œã€‚

### 3. ä½¿ç”¨ç¤ºä¾‹

```html
<!DOCTYPE html>
<html>
<head>
    <title>Hello World</title>
</head>
<body>
    <h1>ğŸŒŸ æˆ‘çš„ç¬¬ä¸€ä¸ªæ‰˜ç®¡é¡µé¢</h1>
    <p>é€šè¿‡Difyæ’ä»¶è½»æ¾æ‰˜ç®¡HTMLå†…å®¹åˆ°GitHub Pagesï¼</p>
</body>
</html>
```

## ğŸ“‹ å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|------|--------|
| `html_content` | string | âœ… | è¦æ‰˜ç®¡çš„HTMLå†…å®¹ | - |
| `unique_id` | string | âŒ | æ–‡ä»¶çš„è‡ªå®šä¹‰å”¯ä¸€æ ‡è¯†ç¬¦ | è‡ªåŠ¨ç”Ÿæˆï¼ˆæ—¶é—´æˆ³+UUIDï¼‰ |

## ğŸ¯ è¾“å‡ºç»“æœ

```json
{
  "pages_url": "https://username.github.io/1719123456_abc12345.html",
  "repository_url": "https://github.com/username/username.github.io",
  "file_path": "1719123456_abc12345.html",
  "unique_id": "1719123456_abc12345",
  "status": "deployed"
}
```

### è¾“å‡ºå­—æ®µè¯´æ˜

- `pages_url`: å¯ç›´æ¥è®¿é—®çš„GitHub Pages URL
- `repository_url`: GitHubä»“åº“åœ°å€
- `file_path`: HTMLæ–‡ä»¶åœ¨ä»“åº“ä¸­çš„è·¯å¾„
- `unique_id`: æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦
- `status`: éƒ¨ç½²çŠ¶æ€ï¼ˆ`deployed` æˆ– `deploying`ï¼‰

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

- ğŸ¨ **å¿«é€ŸåŸå‹å±•ç¤º** - åˆ†äº«è®¾è®¡åŸå‹å’Œæ¦‚å¿µéªŒè¯
- ğŸ“Š **æ•°æ®å¯è§†åŒ–** - æ‰˜ç®¡å›¾è¡¨å’Œä»ªè¡¨æ¿
- ğŸ“‹ **ä¸´æ—¶é¡µé¢** - åˆ›å»ºä¼šè®®çºªè¦ã€æ´»åŠ¨é¡µé¢
- ğŸ“ **æ•™å­¦æ¼”ç¤º** - æ•™è‚²å†…å®¹å’Œæ•™ç¨‹å±•ç¤º
- ğŸ“ **è¡¨å•æ”¶é›†** - ç®€å•çš„ä¿¡æ¯æ”¶é›†é¡µé¢
- ğŸ”— **é“¾æ¥åˆ†äº«** - ä¸ºæ¯ä¸ªHTMLå†…å®¹ç”Ÿæˆå”¯ä¸€çš„åˆ†äº«é“¾æ¥

## ğŸ—ï¸ å·¥ä½œåŸç†

1. **ç”¨æˆ·è¾“å…¥** - æä¾›HTMLå†…å®¹å’Œå¯é€‰çš„å”¯ä¸€ID
2. **ä»“åº“æ£€æŸ¥** - æ£€æŸ¥æˆ–åˆ›å»ºç”¨æˆ·çš„ `{username}.github.io` ä»“åº“
3. **æ–‡ä»¶ä¸Šä¼ ** - ä½¿ç”¨å”¯ä¸€IDä½œä¸ºæ–‡ä»¶åä¸Šä¼ HTMLå†…å®¹
4. **Pageså¯ç”¨** - ç¡®ä¿GitHub Pageså·²å¯ç”¨å¹¶æ­£ç¡®é…ç½®
5. **URLè¿”å›** - è¿”å›æ ¼å¼ä¸º `https://{username}.github.io/{unique_id}.html` çš„è®¿é—®åœ°å€

## ğŸ› ï¸ å¼€å‘å’Œæµ‹è¯•

### ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd dify_plugin

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
source .venv/bin/activate  # macOS/Linux

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### è¿è¡Œæµ‹è¯•

```bash
# åŸºç¡€åŠŸèƒ½æµ‹è¯•
python test_plugin.py

# è¿è¡Œæ’ä»¶
python main.py
```

### é¡¹ç›®ç»“æ„

```
dify_plugin/
â”œâ”€â”€ provider/
â”‚   â”œâ”€â”€ github_pages_hosting.yaml  # æä¾›è€…é…ç½®
â”‚   â””â”€â”€ github_pages_hosting.py    # å‡­è¯éªŒè¯
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ html_to_pages.yaml        # å·¥å…·é…ç½®
â”‚   â””â”€â”€ html_to_pages.py          # å·¥å…·å®ç°
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ github_manager.py         # GitHub APIç®¡ç†å™¨
â”œâ”€â”€ working/
â”‚   â””â”€â”€ progress.md               # å¼€å‘è¿›åº¦è®°å½•
â”œâ”€â”€ manifest.yaml                # æ’ä»¶ä¸»é…ç½®
â”œâ”€â”€ requirements.txt             # Pythonä¾èµ–
â”œâ”€â”€ main.py                     # æ’ä»¶å…¥å£
â”œâ”€â”€ test_plugin.py             # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ icon.svg                   # æ’ä»¶å›¾æ ‡
â”œâ”€â”€ PRIVACY.md                # éšç§æ”¿ç­–
â”œâ”€â”€ USAGE_GUIDE.md           # ä½¿ç”¨æŒ‡å—
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯

1. **Tokenæƒé™ä¸è¶³** - ç¡®ä¿GitHub tokenå…·æœ‰`repo`æƒé™
2. **ä»“åº“ä¸å­˜åœ¨** - æ’ä»¶ä¼šè‡ªåŠ¨åˆ›å»º `{username}.github.io` ä»“åº“
3. **éƒ¨ç½²è¶…æ—¶** - GitHub Pageséƒ¨ç½²é€šå¸¸éœ€è¦1-3åˆ†é’Ÿ
4. **APIé™åˆ¶** - éµå¾ªGitHub APIé€Ÿç‡é™åˆ¶

### è°ƒè¯•æŠ€å·§

- ä½¿ç”¨ `test_plugin.py` éªŒè¯åŸºç¡€åŠŸèƒ½
- æ£€æŸ¥GitHubä»“åº“æ˜¯å¦æ­£ç¡®åˆ›å»º
- æŸ¥çœ‹æ’ä»¶è¿”å›çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
- éªŒè¯HTMLå†…å®¹æ ¼å¼æ­£ç¡®æ€§

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

- ğŸ” **ä¿æŠ¤è®¿é—®ä»¤ç‰Œ** - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ä»¤ç‰Œ
- ğŸ” **å†…å®¹å®¡æŸ¥** - ç¡®ä¿HTMLå†…å®¹ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯
- ğŸ“Š **ç›‘æ§ä½¿ç”¨** - æ³¨æ„GitHubçš„ä½¿ç”¨é™åˆ¶å’Œé…é¢
- ğŸ”„ **å®šæœŸç»´æŠ¤** - å®šæœŸæ›´æ–°ä»¤ç‰Œå’Œæ¸…ç†ä¸éœ€è¦çš„æ–‡ä»¶

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- âš¡ ä½¿ç”¨åˆç†çš„è¶…æ—¶è®¾ç½®
- ğŸ¯ å®ç°æ™ºèƒ½é‡è¯•æœºåˆ¶
- ğŸ“Š ç›‘æ§APIè°ƒç”¨é¢‘ç‡
- ğŸ—‚ï¸ åˆç†ç®¡ç†æ–‡ä»¶æ•°é‡

## ğŸ†” å”¯ä¸€IDç®¡ç†

æ’ä»¶ä½¿ç”¨æ—¶é—´æˆ³+UUIDçš„ç»„åˆç”Ÿæˆå”¯ä¸€IDï¼Œæ ¼å¼ä¸ºï¼š`{timestamp}_{uuid}`

ç¤ºä¾‹ï¼š`1719123456_abc12345`

- `timestamp`: Unixæ—¶é—´æˆ³ï¼Œç¡®ä¿æ—¶é—´å”¯ä¸€æ€§
- `uuid`: 8ä½UUIDï¼Œç¡®ä¿åŒä¸€æ—¶é—´çš„å”¯ä¸€æ€§

è¿™æ ·å¯ä»¥ç¡®ä¿æ¯ä¸ªæ‰˜ç®¡çš„HTMLæ–‡ä»¶éƒ½æœ‰å”¯ä¸€çš„è®¿é—®åœ°å€ï¼Œé¿å…æ–‡ä»¶åå†²çªã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªæ’ä»¶ï¼

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§LICENSEæ–‡ä»¶

## ğŸ“š ç›¸å…³èµ„æº

- [Difyæ’ä»¶å¼€å‘æ–‡æ¡£](https://docs.dify.ai/plugin-dev-zh/)
- [GitHub Pagesæ–‡æ¡£](https://docs.github.com/en/pages)
- [GitHub APIæ–‡æ¡£](https://docs.github.com/en/rest)

---

â¤ï¸ ç”± [Dify Plugin Framework](https://github.com/langgenius/dify) å¼ºåŠ›é©±åŠ¨
